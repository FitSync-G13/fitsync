# FitSync System Architecture

Complete architectural overview of the FitSync Personal Training Management System.

## ğŸ—ï¸ High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CLIENT LAYER                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚           React Frontend (Port 3000)                      â”‚  â”‚
â”‚  â”‚  - Authentication UI    - Role-based Dashboards           â”‚  â”‚
â”‚  â”‚  - Workout Management   - Schedule & Bookings             â”‚  â”‚
â”‚  â”‚  - Progress Tracking    - Profile Management              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼ HTTPS/REST
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API GATEWAY (Port 4000)                    â”‚
â”‚  - Request Routing      - JWT Validation                        â”‚
â”‚  - Rate Limiting        - CORS Handling                         â”‚
â”‚  - Load Balancing       - API Versioning                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–¼                â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  USER SERVICE  â”‚ TRAINING SVC   â”‚  SCHEDULE SVC  â”‚ PROGRESS SVC   â”‚
â”‚   (Port 3001)  â”‚  (Port 3002)   â”‚  (Port 8003)   â”‚  (Port 8004)   â”‚
â”‚                â”‚                â”‚                â”‚                â”‚
â”‚ - Auth & JWT   â”‚ - Exercises    â”‚ - Availability â”‚ - Body Metrics â”‚
â”‚ - User CRUD    â”‚ - Workouts     â”‚ - Bookings     â”‚ - Workout Logs â”‚
â”‚ - RBAC         â”‚ - Diet Plans   â”‚ - Group Class  â”‚ - Analytics    â”‚
â”‚ - Sessions     â”‚ - Programs     â”‚ - Conflicts    â”‚ - Achievements â”‚
â”‚                â”‚                â”‚                â”‚                â”‚
â”‚  Node.js       â”‚   Node.js      â”‚  Python/FastAPIâ”‚ Python/FastAPI â”‚
â”‚  Express       â”‚   Express      â”‚    asyncpg     â”‚    asyncpg     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                â”‚              â”‚              â”‚
         â–¼                â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PostgreSQL   â”‚   PostgreSQL   â”‚   PostgreSQL   â”‚   PostgreSQL   â”‚
â”‚    userdb      â”‚   trainingdb   â”‚   scheduledb   â”‚   progressdb   â”‚
â”‚  (Port 5432)   â”‚  (Port 5433)   â”‚  (Port 5434)   â”‚  (Port 5435)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚         Redis (Port 6379)                  â”‚
         â”‚  - Session Cache    - User Data Cache      â”‚
         â”‚  - Token Blacklist  - Pub/Sub Queue        â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–²
                              â”‚ Subscribe
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚     NOTIFICATION SERVICE (Port 3005)       â”‚
         â”‚  - Event Listeners  - Email (mock)         â”‚
         â”‚  - Templates        - SMS (mock)           â”‚
         â”‚  - Notifications    - Push (mock)          â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Data Flow Diagrams

### 1. Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Clientâ”‚                                    â”‚ User Service â”‚
â””â”€â”€â”¬â”€â”€â”€â”˜                                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚                                               â”‚
   â”‚ POST /auth/login                              â”‚
   â”‚ {email, password}                             â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                                               â”‚
   â”‚                                          [Verify Credentials]
   â”‚                                          [Generate JWT]
   â”‚                                          [Store in Redis]
   â”‚                                               â”‚
   â”‚ {user, access_token, refresh_token}           â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                                               â”‚
   â”‚ GET /users/me                                 â”‚
   â”‚ Header: Authorization: Bearer {token}         â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                                               â”‚
   â”‚                                          [Verify JWT]
   â”‚                                          [Check Redis Cache]
   â”‚                                          [Return User Data]
   â”‚                                               â”‚
   â”‚ {user_profile}                                â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                                               â”‚
```

### 2. Create Workout Plan Flow

```
Trainer              API Gateway         Training Service        PostgreSQL
  â”‚                      â”‚                       â”‚                   â”‚
  â”‚ POST /workouts       â”‚                       â”‚                   â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚                   â”‚
  â”‚                      â”‚                       â”‚                   â”‚
  â”‚                      â”‚ [Verify JWT]          â”‚                   â”‚
  â”‚                      â”‚ [Check Role=trainer]  â”‚                   â”‚
  â”‚                      â”‚                       â”‚                   â”‚
  â”‚                      â”‚ Forward Request       â”‚                   â”‚
  â”‚                      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                   â”‚
  â”‚                      â”‚                       â”‚                   â”‚
  â”‚                      â”‚                       â”‚ INSERT workout    â”‚
  â”‚                      â”‚                       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                      â”‚                       â”‚                   â”‚
  â”‚                      â”‚                       â”‚ workout_id        â”‚
  â”‚                      â”‚                       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                      â”‚                       â”‚                   â”‚
  â”‚                      â”‚                       â”‚ [Publish Event]   â”‚
  â”‚                      â”‚                       â”‚ Redis: workout.created
  â”‚                      â”‚                       â”‚                   â”‚
  â”‚                      â”‚ {workout_data}        â”‚                   â”‚
  â”‚                      â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚
  â”‚                      â”‚                       â”‚                   â”‚
  â”‚ {success, workout}   â”‚                       â”‚                   â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚                   â”‚
  â”‚                      â”‚                       â”‚                   â”‚
```

### 3. Booking with Notification Flow

```
Client      Schedule Service    Notification Service    Redis       Email
  â”‚                â”‚                     â”‚                â”‚           â”‚
  â”‚ POST /bookings â”‚                     â”‚                â”‚           â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚                â”‚           â”‚
  â”‚                â”‚                     â”‚                â”‚           â”‚
  â”‚           [Check Availability]       â”‚                â”‚           â”‚
  â”‚           [Create Booking]           â”‚                â”‚           â”‚
  â”‚                â”‚                     â”‚                â”‚           â”‚
  â”‚                â”‚ Publish: booking.created             â”‚           â”‚
  â”‚                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚           â”‚
  â”‚                â”‚                     â”‚                â”‚           â”‚
  â”‚ {booking_data} â”‚                     â”‚                â”‚           â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”‚                â”‚           â”‚
  â”‚                â”‚                     â”‚ Subscribe      â”‚           â”‚
  â”‚                â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
  â”‚                â”‚                     â”‚                â”‚           â”‚
  â”‚                â”‚              [Process Event]         â”‚           â”‚
  â”‚                â”‚              [Load Template]         â”‚           â”‚
  â”‚                â”‚              [Send Email]            â”‚           â”‚
  â”‚                â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                â”‚                     â”‚                â”‚           â”‚
  â”‚                â”‚              [Store Notification]    â”‚           â”‚
  â”‚                â”‚                     â”‚                â”‚           â”‚
```

## ğŸ—„ï¸ Database Architecture

### User Service Database (userdb)

```sql
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          users                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)      â”‚ UUID                                         â”‚
â”‚ email        â”‚ VARCHAR(255) UNIQUE                          â”‚
â”‚ password_hashâ”‚ VARCHAR(255)                                 â”‚
â”‚ role         â”‚ ENUM (admin, trainer, client, gym_owner)     â”‚
â”‚ first_name   â”‚ VARCHAR(100)                                 â”‚
â”‚ last_name    â”‚ VARCHAR(100)                                 â”‚
â”‚ phone        â”‚ VARCHAR(20)                                  â”‚
â”‚ date_of_birthâ”‚ DATE                                         â”‚
â”‚ address      â”‚ JSONB                                        â”‚
â”‚ gym_id (FK)  â”‚ UUID â†’ gyms.id                               â”‚
â”‚ is_active    â”‚ BOOLEAN                                      â”‚
â”‚ created_at   â”‚ TIMESTAMP                                    â”‚
â”‚ updated_at   â”‚ TIMESTAMP                                    â”‚
â”‚ last_login   â”‚ TIMESTAMP                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ 1:N
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        sessions                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)      â”‚ UUID                                         â”‚
â”‚ user_id (FK) â”‚ UUID â†’ users.id                              â”‚
â”‚ refresh_tokenâ”‚ TEXT                                         â”‚
â”‚ token_hash   â”‚ VARCHAR(255)                                 â”‚
â”‚ ip_address   â”‚ VARCHAR(45)                                  â”‚
â”‚ user_agent   â”‚ TEXT                                         â”‚
â”‚ expires_at   â”‚ TIMESTAMP                                    â”‚
â”‚ created_at   â”‚ TIMESTAMP                                    â”‚
â”‚ revoked_at   â”‚ TIMESTAMP                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          gyms                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)      â”‚ UUID                                         â”‚
â”‚ name         â”‚ VARCHAR(255)                                 â”‚
â”‚ description  â”‚ TEXT                                         â”‚
â”‚ address      â”‚ JSONB                                        â”‚
â”‚ phone        â”‚ VARCHAR(20)                                  â”‚
â”‚ email        â”‚ VARCHAR(255)                                 â”‚
â”‚ amenities    â”‚ TEXT[]                                       â”‚
â”‚ owner_id (FK)â”‚ UUID â†’ users.id                              â”‚
â”‚ is_active    â”‚ BOOLEAN                                      â”‚
â”‚ created_at   â”‚ TIMESTAMP                                    â”‚
â”‚ updated_at   â”‚ TIMESTAMP                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Training Service Database (trainingdb)

```sql
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       exercises                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)      â”‚ UUID                                         â”‚
â”‚ name         â”‚ VARCHAR(255)                                 â”‚
â”‚ description  â”‚ TEXT                                         â”‚
â”‚ muscle_group â”‚ VARCHAR[] [chest, back, legs, ...]           â”‚
â”‚ equipment    â”‚ VARCHAR[] [dumbbells, barbell, ...]          â”‚
â”‚ difficulty   â”‚ ENUM (beginner, intermediate, advanced)      â”‚
â”‚ video_url    â”‚ VARCHAR(255)                                 â”‚
â”‚ created_by   â”‚ UUID (trainer_id)                            â”‚
â”‚ created_at   â”‚ TIMESTAMP                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ N:M
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     workout_plans                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)      â”‚ UUID                                         â”‚
â”‚ name         â”‚ VARCHAR(255)                                 â”‚
â”‚ description  â”‚ TEXT                                         â”‚
â”‚ trainer_id   â”‚ UUID                                         â”‚
â”‚ duration_weeksâ”‚INTEGER                                      â”‚
â”‚ goal         â”‚ ENUM (weight_loss, muscle_gain, ...)         â”‚
â”‚ difficulty   â”‚ ENUM (beginner, intermediate, advanced)      â”‚
â”‚ exercises    â”‚ JSONB [{exercise_id, day, sets, reps, ...}]  â”‚
â”‚ is_template  â”‚ BOOLEAN                                      â”‚
â”‚ created_at   â”‚ TIMESTAMP                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ 1:1
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      diet_plans                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)      â”‚ UUID                                         â”‚
â”‚ name         â”‚ VARCHAR(255)                                 â”‚
â”‚ trainer_id   â”‚ UUID                                         â”‚
â”‚ calories     â”‚ INTEGER                                      â”‚
â”‚ macros       â”‚ JSONB {protein, carbs, fats}                 â”‚
â”‚ meals        â”‚ JSONB [{meal_type, name, ingredients, ...}]  â”‚
â”‚ restrictions â”‚ VARCHAR[] [vegan, gluten-free, ...]          â”‚
â”‚ created_at   â”‚ TIMESTAMP                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” Security Architecture

### JWT Token Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     JWT TOKEN STRUCTURE                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Access Token (15 minutes):                                 â”‚
â”‚  {                                                          â”‚
â”‚    "id": "user-uuid",                                       â”‚
â”‚    "email": "user@example.com",                             â”‚
â”‚    "role": "client",                                        â”‚
â”‚    "gym_id": "gym-uuid",                                    â”‚
â”‚    "iat": 1234567890,                                       â”‚
â”‚    "exp": 1234568790,                                       â”‚
â”‚    "iss": "fitsync-user-service",                           â”‚
â”‚    "aud": "fitsync-api"                                     â”‚
â”‚  }                                                          â”‚
â”‚                                                             â”‚
â”‚  Refresh Token (7 days):                                    â”‚
â”‚  {                                                          â”‚
â”‚    "id": "user-uuid",                                       â”‚
â”‚    "type": "refresh",                                       â”‚
â”‚    "iat": 1234567890,                                       â”‚
â”‚    "exp": 1235172690                                        â”‚
â”‚  }                                                          â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Role-Based Access Control Matrix

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Endpoint   â”‚ Admin â”‚ Trainer â”‚ Client â”‚ Gym Owner â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ GET /users  â”‚   âœ…  â”‚    âŒ   â”‚   âŒ   â”‚     âœ…    â”‚
â”‚ POST /users â”‚   âœ…  â”‚    âŒ   â”‚   âŒ   â”‚     âŒ    â”‚
â”‚ GET /users/meâ”‚  âœ…  â”‚    âœ…   â”‚   âœ…   â”‚     âœ…    â”‚
â”‚ PUT /users/meâ”‚  âœ…  â”‚    âœ…   â”‚   âœ…   â”‚     âœ…    â”‚
â”‚ PUT /users/:id/roleâ”‚ âœ…â”‚ âŒ   â”‚   âŒ   â”‚     âŒ    â”‚
â”‚ POST /exercisesâ”‚ âœ… â”‚    âœ…   â”‚   âŒ   â”‚     âŒ    â”‚
â”‚ POST /workoutsâ”‚ âœ…  â”‚    âœ…   â”‚   âŒ   â”‚     âŒ    â”‚
â”‚ POST /programsâ”‚ âœ…  â”‚    âœ…   â”‚   âŒ   â”‚     âŒ    â”‚
â”‚ POST /bookingsâ”‚ âœ…  â”‚    âœ…   â”‚   âœ…   â”‚     âœ…    â”‚
â”‚ GET /analyticsâ”‚ âœ…  â”‚    âœ…*  â”‚   âœ…** â”‚     âœ…    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
* Trainers see only their clients
** Clients see only their own data
```

## ğŸš€ Deployment Architecture

### Container Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Docker Host                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  User Service â”‚  â”‚Training Serviceâ”‚  â”‚Schedule Serviceâ”‚  â”‚
â”‚  â”‚  Container    â”‚  â”‚  Container    â”‚  â”‚  Container     â”‚  â”‚
â”‚  â”‚  Port: 3001   â”‚  â”‚  Port: 3002   â”‚  â”‚  Port: 8003    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚          â”‚                  â”‚                  â”‚            â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                          â”‚                                  â”‚
â”‚                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                â–¼                   â–¼                        â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚     â”‚   PostgreSQL     â”‚  â”‚      Redis       â”‚             â”‚
â”‚     â”‚   Cluster        â”‚  â”‚    Container     â”‚             â”‚
â”‚     â”‚   4 Databases    â”‚  â”‚   Port: 6379     â”‚             â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚          fitsync-network (bridge)                     â”‚ â”‚
â”‚  â”‚  - Service discovery via container names              â”‚ â”‚
â”‚  â”‚  - Internal DNS resolution                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Performance Characteristics

### Caching Strategy

```
Request Flow with Caching:

  Client Request
       â”‚
       â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  API Gateway    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Auth Middleware â”‚â”€â”€â”€ Check Redis for user data
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
           â”‚              Found in cache? âœ… â†’ Return
           â”‚                   â”‚
           â”‚                Not found? âŒ
           â”‚                   â”‚
           â–¼                   â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    Query Database
  â”‚   Service       â”‚         â”‚
  â”‚   Controller    â”‚         â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
           â”‚                  â”‚
           â–¼                  â–¼
      Process          Store in Redis (TTL: 15min)
           â”‚                  â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
              Return Response

Cache Hit Ratio Target: 70-80%
Cache TTL: 900 seconds (15 minutes)
```

### Database Indexing Strategy

```
Users Table:
  - PRIMARY KEY (id)
  - INDEX (email) - for login lookups
  - INDEX (role) - for filtering by role
  - INDEX (gym_id) - for gym-based queries
  - INDEX (oauth_provider, oauth_provider_id) - for OAuth

Sessions Table:
  - PRIMARY KEY (id)
  - INDEX (user_id) - for user session lookups
  - INDEX (token_hash) - for token validation
  - INDEX (expires_at) - for cleanup queries

Workout Plans Table:
  - PRIMARY KEY (id)
  - INDEX (trainer_id) - for trainer's plans
  - INDEX (difficulty, goal) - for filtering
  - INDEX (is_template) - for template queries

Bookings Table:
  - PRIMARY KEY (id)
  - INDEX (client_id, booking_date) - for client schedule
  - INDEX (trainer_id, booking_date) - for trainer schedule
  - INDEX (status) - for filtering by status
```

## ğŸ”„ Event-Driven Architecture

### Event Publishing & Subscription

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Redis Pub/Sub Channels                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  Channel: booking.created                                  â”‚
â”‚  Publisher: Schedule Service                               â”‚
â”‚  Subscriber: Notification Service                          â”‚
â”‚  Payload: {booking_id, client_id, trainer_id, date, time}  â”‚
â”‚                                                            â”‚
â”‚  Channel: booking.cancelled                                â”‚
â”‚  Publisher: Schedule Service                               â”‚
â”‚  Subscriber: Notification Service                          â”‚
â”‚  Payload: {booking_id, client_id, reason}                  â”‚
â”‚                                                            â”‚
â”‚  Channel: program.assigned                                 â”‚
â”‚  Publisher: Training Service                               â”‚
â”‚  Subscriber: Notification Service                          â”‚
â”‚  Payload: {program_id, client_id, trainer_id, workout_id}  â”‚
â”‚                                                            â”‚
â”‚  Channel: achievement.earned                               â”‚
â”‚  Publisher: Progress Service                               â”‚
â”‚  Subscriber: Notification Service                          â”‚
â”‚  Payload: {achievement_id, client_id, type, title}         â”‚
â”‚                                                            â”‚
â”‚  Channel: booking.reminder                                 â”‚
â”‚  Publisher: Scheduler (Cron Job)                           â”‚
â”‚  Subscriber: Notification Service                          â”‚
â”‚  Payload: {booking_id, client_id, trainer_id, time}        â”‚
â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ˆ Scalability Considerations

### Horizontal Scaling

```
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  Load Balancer  â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼                 â–¼                 â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Gateway  â”‚      â”‚ Gateway  â”‚      â”‚ Gateway  â”‚
   â”‚ Instance â”‚      â”‚ Instance â”‚      â”‚ Instance â”‚
   â”‚    #1    â”‚      â”‚    #2    â”‚      â”‚    #3    â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
        â”‚                 â”‚                  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼                â–¼                â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  User    â”‚      â”‚ Training â”‚      â”‚ Schedule â”‚
   â”‚ Service  â”‚      â”‚ Service  â”‚      â”‚ Service  â”‚
   â”‚ (N pods) â”‚      â”‚ (N pods) â”‚      â”‚ (N pods) â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Performance Targets

- **API Response Time:** < 200ms (p95)
- **Database Query Time:** < 50ms (p95)
- **Cache Hit Ratio:** > 70%
- **Concurrent Users:** 1,000+
- **Requests Per Second:** 500+
- **Database Connections:** 20 per service
- **Redis Connections:** 10 per service

## Design Principles

### Microservices Best Practices

1. **Service Independence**: Each service has its own database and can be deployed independently
2. **API-First Design**: Well-defined RESTful APIs with consistent response formats
3. **Event-Driven Communication**: Asynchronous communication via Redis Pub/Sub
4. **Fault Tolerance**: Services continue operating even if others fail
5. **Security by Design**: JWT authentication, RBAC, and secure communication

### Technology Choices

- **Node.js/Express**: User and Training services (JavaScript expertise, npm ecosystem)
- **Python/FastAPI**: Schedule and Progress services (data processing, async capabilities)
- **PostgreSQL**: Reliable ACID-compliant relational database
- **Redis**: Fast caching and pub/sub messaging
- **Docker**: Containerization for consistent deployment

---

## ğŸ“š Related Documentation

- **[README](../README.md)** - Project overview and quick start
- **[API Documentation](API.md)** - Complete API reference
- **[Quick Start Guide](QUICK_START.md)** - 5-minute setup
- **[Development Guide](DEVELOPMENT.md)** - Local development workflow

---

**Architecture designed for scalability, reliability, and maintainability** ğŸš€

**Last Updated:** November 24, 2025
